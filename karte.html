<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Wettiq VIP – Tageskarte</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            background: radial-gradient(circle at top, #161b2b 0, #050712 45%, #02030a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 12px;
            color: #f5f5f5;
            font-family: -apple-system, system-ui, BlinkMacSystemFont, "SF Pro Text", sans-serif;
        }

        .page {
            width: 100%;
            max-width: 980px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
        }

        .frame {
            width: 100%;
            max-width: 780px;
            background: radial-gradient(circle at 0 0, #151c35, #050714 80%);
            border-radius: 30px;
            padding: 26px 26px 26px;
            border: 1px solid rgba(120, 142, 255, 0.35);
            box-shadow: 0 22px 60px rgba(0, 0, 0, 0.8);
        }

        .frame-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 18px;
            gap: 10px;
        }

        .frame-left {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .frame-title {
            letter-spacing: 0.22em;
            font-size: 12px;
            text-transform: uppercase;
            color: #a7b4ff;
        }

        .frame-subtitle {
            font-size: 13px;
            color: rgba(220, 228, 255, 0.9);
        }

        .frame-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 6px;
        }

        .date-label {
            font-size: 11px;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: rgba(191, 204, 255, 0.9);
        }

        .pill-yellow {
            font-size: 11px;
            letter-spacing: 0.16em;
            text-transform: uppercase;
            padding: 7px 16px;
            border-radius: 999px;
            border: 1px solid rgba(255, 220, 146, 0.9);
            background: linear-gradient(90deg, rgba(255, 204, 115, 0.32), rgba(255, 220, 158, 0.18));
            color: #ffdf9c;
        }

        .tips-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 18px;
        }

        .tip-card {
            border-radius: 22px;
            padding: 13px 16px;
            background: radial-gradient(circle at 0 0, rgba(48, 68, 138, 0.38), rgba(7, 10, 30, 0.98));
            border: 1px solid rgba(121, 142, 255, 0.42);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .tip-left {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .tip-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            color: rgba(179, 193, 255, 0.9);
        }

        .tip-match {
            font-size: 14px;
            color: #f7f8ff;
        }

        .tip-pick {
            font-size: 13px;
            color: rgba(211, 220, 255, 0.9);
        }

        .tip-right {
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .quote-chip {
            border-radius: 999px;
            padding: 6px 13px;
            font-size: 12px;
            border: 1px solid rgba(186, 203, 255, 0.9);
            color: #e3ebff;
        }

        .notice {
            font-size: 11px;
            color: rgba(170, 183, 230, 0.9);
            margin-top: 4px;
        }

        .notice span {
            color: #ffcb7a;
        }

        .buttons-row {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            max-width: 420px;
            margin-top: 4px;
        }

        .btn {
            border-radius: 999px;
            padding: 12px 18px;
            font-size: 14px;
            border: none;
            cursor: pointer;
            font-family: inherit;
            transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s ease, opacity 0.08s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2f66ff, #4978ff);
            color: #fdfdff;
            box-shadow: 0 10px 26px rgba(10, 40, 120, 0.8);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 12px 30px rgba(10, 40, 120, 0.95);
        }

        .btn-ghost {
            background: transparent;
            border: 1px solid rgba(116, 135, 230, 0.9);
            color: #dbe3ff;
        }

        .btn-ghost:hover {
            background: rgba(20, 30, 85, 0.8);
            box-shadow: 0 7px 18px rgba(8, 18, 70, 0.75);
        }

        @media (max-width: 720px) {
            .frame {
                border-radius: 26px;
                padding: 20px 18px 20px;
            }

            .frame-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .frame-right {
                align-items: flex-start;
            }

            .tip-card {
                flex-direction: column;
                align-items: flex-start;
            }

            .tip-right {
                width: 100%;
                justify-content: flex-start;
            }

            .buttons-row {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
<div class="page">
    <div id="cardFrame" class="frame">
        <div class="frame-header">
            <div class="frame-left">
                <div class="frame-title">Wettiq VIP</div>
                <div class="frame-subtitle">Ausgewählte Tages-Tipps</div>
            </div>
            <div class="frame-right">
                <div class="date-label" id="dateLabel">Tageskarte</div>
                <div class="pill-yellow">Mitgliederbereich</div>
            </div>
        </div>

        <div id="tipsContainer" class="tips-list"></div>

        <div class="notice" id="noticeText">
            Hinweis: Wetten immer mit Verantwortung.
        </div>
    </div>

    <div class="buttons-row">
        <button class="btn btn-primary" id="btnDownload">Als Bild herunterladen</button>
        <button class="btn btn-ghost" id="btnBack">Zurück zur Eingabe</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
    const STORAGE_KEY = "wettiqTips";

    function loadTips() {
        try {
            const raw = localStorage.getItem(STORAGE_KEY);
            if (!raw) return [];
            const arr = JSON.parse(raw);
            return Array.isArray(arr) ? arr : [];
        } catch (e) {
            return [];
        }
    }

    function formatDate() {
        const now = new Date();
        const weekday = now.toLocaleDateString("de-DE", { weekday: "long" });
        const date = now.toLocaleDateString("de-DE");
        return weekday.charAt(0).toUpperCase() + weekday.slice(1) + ", " + date;
    }

    function renderCard() {
        const tips = loadTips();
        const container = document.getElementById("tipsContainer");
        const notice = document.getElementById("noticeText");

        document.getElementById("dateLabel").textContent =
            "Tageskarte – " + formatDate();

        container.innerHTML = "";

        if (!tips.length) {
            const msg = document.createElement("div");
            msg.style.fontSize = "13px";
            msg.style.color = "rgba(210,220,255,0.9)";
            msg.textContent =
                "Keine Tipps gefunden. Bitte zuerst auf der Eingabeseite Tipps erstellen.";
            container.appendChild(msg);
            return;
        }

        tips.forEach((tip, index) => {
            const card = document.createElement("div");
            card.className = "tip-card";

            const left = document.createElement("div");
            left.className = "tip-left";

            const label = document.createElement("div");
            label.className = "tip-label";
            label.textContent = "Tipp " + (index + 1);

            const match = document.createElement("div");
            match.className = "tip-match";
            match.textContent = tip.match;

            const pick = document.createElement("div");
            pick.className = "tip-pick";
            pick.textContent = "Tipp: " + tip.pick;

            left.appendChild(label);
            left.appendChild(match);
            left.appendChild(pick);

            const right = document.createElement("div");
            right.className = "tip-right";

            const quote = document.createElement("div");
            quote.className = "quote-chip";
            quote.textContent = "Quote: " + (tip.odds || "-");

            right.appendChild(quote);

            card.appendChild(left);
            card.appendChild(right);

            container.appendChild(card);
        });

        notice.innerHTML = 'Hinweis: Wetten immer mit Verantwortung.';
    }

    document.getElementById("btnBack").addEventListener("click", () => {
        window.location.href = "index.html";
    });

    document.getElementById("btnDownload").addEventListener("click", () => {
        const frame = document.getElementById("cardFrame");
        html2canvas(frame, {
            scale: 2,
            useCORS: true,
            backgroundColor: null
        }).then(canvas => {
            const link = document.createElement("a");
            link.download = "wettiq-vip-tageskarte.png";
            link.href = canvas.toDataURL("image/png");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }).catch(err => {
            alert("Bild konnte nicht erzeugt werden. Fehler: " + err.message);
        });
    });

    document.addEventListener("DOMContentLoaded", renderCard);
</script>
</body>
</html>
