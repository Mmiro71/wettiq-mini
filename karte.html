<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Wettiq VIP – Tageskarte</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, system-ui, BlinkMacSystemFont, "SF Pro Text", sans-serif;
        }

        body {
            min-height: 100vh;
            background: radial-gradient(circle at top, #101426 0, #050712 45%, #02030a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px 12px;
            color: #f5f5f5;
        }

        .frame {
            max-width: 780px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .card-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #12182a, #0c1220);
            border-radius: 28px;
            padding: 28px 32px 32px;
            box-shadow:
                0 28px 60px rgba(0, 0, 0, 0.8),
                0 0 0 1px rgba(255, 255, 255, 0.02);
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 4px;
        }

        .card-title-block {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .app-title {
            letter-spacing: 0.18em;
            text-transform: uppercase;
            font-size: 13px;
            color: #e7ecff;
        }

        .card-subtitle {
            font-size: 13px;
            color: #aeb7d9;
        }

        .card-meta {
            text-align: right;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .tag-date {
            font-size: 11px;
            letter-spacing: 0.16em;
            text-transform: uppercase;
            color: #8f9cc5;
        }

        .tag-pill {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 16px;
            border-radius: 999px;
            font-size: 11px;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            background: linear-gradient(135deg, #f6c35c, #f09b2d);
            color: #1c1320;
            font-weight: 500;
        }

        .tips-list {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .tip-row {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 16px;
            padding: 14px 18px;
            border-radius: 18px;
            background: rgba(12, 17, 32, 0.96);
            border: 1px solid rgba(132, 148, 214, 0.22);
        }

        .tip-badge {
            min-width: 60px;
            padding: 6px 10px;
            border-radius: 999px;
            font-size: 11px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            background: rgba(44, 67, 148, 0.9);
            color: #f5f6ff;
        }

        .tip-main {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .tip-match {
            font-size: 15px;
            color: #f7f7ff;
        }

        .tip-text {
            font-size: 13px;
            color: #c2c8e3;
        }

        .tip-quote {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 4px;
            min-width: 72px;
        }

        .quote-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            color: #9aa4d0;
        }

        .quote-value {
            font-size: 15px;
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(22, 38, 92, 0.9);
            color: #f5f6ff;
        }

        .card-footer {
            margin-top: 8px;
            font-size: 11px;
            color: #949fc4;
            text-align: right;
        }

        .buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            max-width: 340px;
        }

        .download-btn,
        .back-btn {
            width: 100%;
            padding: 12px 28px;
            font-size: 15px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            transition: 0.18s;
        }

        .download-btn {
            background: #3a6df0;
            color: white;
        }

        .download-btn:hover {
            background: #264fd4;
            transform: translateY(-1px);
        }

        .back-btn {
            background: transparent;
            color: #c5cbea;
            border: 1px solid rgba(151, 164, 214, 0.6);
        }

        .back-btn:hover {
            background: rgba(10, 18, 38, 0.9);
        }

        @media (max-width: 600px) {
            .card-wrapper {
                padding: 22px 18px 26px;
            }

            .tip-row {
                grid-template-columns: 1fr;
                align-items: flex-start;
            }

            .tip-badge {
                align-self: flex-start;
            }

            .tip-quote {
                align-items: flex-start;
            }

            .buttons {
                max-width: none;
            }
        }
    </style>
</head>
<body>
<div class="frame">
    <div class="card-wrapper" id="cardArea">
        <div class="card-header">
            <div class="card-title-block">
                <div class="app-title">Wettiq VIP</div>
                <div class="card-subtitle">Ausgewählte Tages-Tipps</div>
            </div>
            <div class="card-meta">
                <div class="tag-date" id="cardDateLabel">
                    Tageskarte
                </div>
                <div class="tag-pill">Mitgliederbereich</div>
            </div>
        </div>

        <div class="tips-list" id="tipsList">
            <!-- Tipps werden hier per JavaScript eingefügt -->
        </div>

        <div class="card-footer">
            Hinweis: Wetten immer mit Verantwortung.
        </div>
    </div>

    <div class="buttons">
        <button class="download-btn" id="btnDownload">Als Bild herunterladen</button>

        <button class="back-btn" onclick="window.location.href='index.html'">
            Zurück zur Eingabe
        </button>
    </div>
</div>

<!-- html2canvas für Screenshot-Download -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
    // Datum oben rechts setzen
    function setDateLabel() {
        const label = document.getElementById("cardDateLabel");
        const heute = new Date();
        const formatter = new Intl.DateTimeFormat("de-DE", {
            weekday: "long",
            day: "2-digit",
            month: "2-digit",
            year: "numeric"
        });
        label.textContent = "Tageskarte – " + formatter.format(heute);
    }

    // Tipps aus localStorage lesen und anzeigen
    function renderTips() {
        const container = document.getElementById("tipsList");
        container.innerHTML = "";

        // gleicher Key wie auf der Eingabeseite
        const tips = JSON.parse(localStorage.getItem("wettiqTips") || "[]");

        if (!tips.length) {
            const info = document.createElement("div");
            info.style.fontSize = "13px";
            info.style.color = "#b2bddf";
            info.textContent = "Keine Tipps gefunden. Bitte zuerst auf der Eingabeseite Tipps erstellen.";
            container.appendChild(info);
            return;
        }

        tips.forEach((tip, index) => {
            const row = document.createElement("div");
            row.className = "tip-row";

            const badge = document.createElement("div");
            badge.className = "tip-badge";
            badge.textContent = "Tipp " + (index + 1);

            const main = document.createElement("div");
            main.className = "tip-main";

            const match = document.createElement("div");
            match.className = "tip-match";
            match.textContent = tip.match || tip.spiel || "Spiel";

            const text = document.createElement("div");
            text.className = "tip-text";
            const tippText = tip.tip || tip.tipp || tip.text || "";
            text.textContent = tippText ? "Tipp: " + tippText : "";

            main.appendChild(match);
            main.appendChild(text);

            const quoteBox = document.createElement("div");
            quoteBox.className = "tip-quote";

            const qLabel = document.createElement("div");
            qLabel.className = "quote-label";
            qLabel.textContent = "Quote";

            const qVal = document.createElement("div");
            qVal.className = "quote-value";
            qVal.textContent = tip.quote || tip.quotes || "-";

            quoteBox.appendChild(qLabel);
            quoteBox.appendChild(qVal);

            row.appendChild(badge);
            row.appendChild(main);
            row.appendChild(quoteBox);

            container.appendChild(row);
        });
    }

    // Karte als Bild herunterladen
    function setupDownload() {
        const btn = document.getElementById("btnDownload");
        btn.addEventListener("click", () => {
            const area = document.getElementById("cardArea");
            html2canvas(area, {scale: 3}).then(canvas => {
                const link = document.createElement("a");
                link.download = "wettiq-vip-tageskarte.png";
                link.href = canvas.toDataURL("image/png");
                link.click();
            });
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
        setDateLabel();
        renderTips();
        setupDownload();
    });
</script>
</body>
</html>
